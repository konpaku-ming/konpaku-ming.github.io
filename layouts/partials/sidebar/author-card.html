{{/* Author Profile Card for Sidebar */}}
<div class="sidebar-card bg-neutral-100 dark:bg-neutral-800 rounded-xl p-5 shadow-sm">
  {{/* Avatar */}}
  <div class="flex flex-col items-center">
    {{ $avatarParam := site.Params.sidebar.avatar | default "/apple-touch-icon.png" }}
    {{ $avatarPath := strings.TrimPrefix "/" $avatarParam }}
    {{ $avatar := $avatarParam }}
    {{ with resources.Get $avatarPath }}
      {{ $avatar = .RelPermalink }}
    {{ end }}
    <input id="avatar-preview-toggle" type="checkbox" class="peer sr-only">
    <label for="avatar-preview-toggle" class="block cursor-zoom-in">
      <img 
        src="{{ $avatar }}" 
        alt="{{ site.Params.Author.name | default site.Title }}" 
        class="w-[115px] h-[115px] rounded-full object-cover border-4 border-primary-500 dark:border-primary-400 hover:scale-110 transition-transform duration-300"
      >
    </label>
    <label for="avatar-preview-toggle" class="fixed inset-0 z-50 hidden items-center justify-center bg-black/70 peer-checked:flex cursor-zoom-out">
      <img
        src="{{ $avatar }}"
        alt="{{ site.Params.Author.name | default site.Title }}"
        class="max-h-[85vh] max-w-[85vw] rounded-lg shadow-2xl"
      >
      <span class="sr-only">Close</span>
    </label>
    
    {{/* Name */}}
    <h3 class="mt-3 text-lg font-bold text-neutral-900 dark:text-neutral-100">
      {{ site.Params.Author.name | default site.Title }}
    </h3>
    
    {{/* Headline/Bio */}}
    {{ with site.Params.sidebar.headline }}
      <p class="mt-1 text-sm text-neutral-600 dark:text-neutral-400 text-center">
        {{ . }}
      </p>
    {{ end }}
  </div>

  {{/* Social Links */}}
  {{ with site.Params.sidebar.links }}
    <div class="flex justify-center gap-3 mt-4 flex-wrap">
      {{ range . }}
        {{ range $name, $url := . }}
          <a 
            href="{{ $url }}" 
            target="_blank" 
            rel="noopener noreferrer"
            class="p-2 rounded-full bg-neutral-200 dark:bg-neutral-700 text-neutral-600 dark:text-neutral-300 hover:bg-primary-500 hover:text-white dark:hover:bg-primary-400 transition-colors duration-200"
            title="{{ $name }}"
          >
            {{ $iconPath := printf "icons/%s.svg" $name }}
            {{ with resources.Get $iconPath }}
              {{ .Content | safeHTML }}
            {{ else }}
              {{/* Fallback icon */}}
              <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"/>
                <path d="M12 16v-4M12 8h.01"/>
              </svg>
            {{ end }}
          </a>
        {{ end }}
      {{ end }}
    </div>
  {{ end }}

  {{/* Stats */}}
  <div class="grid grid-cols-1 gap-4 mt-5 pt-4 border-t border-neutral-200 dark:border-neutral-700">
    <div class="text-center">
      <div class="text-2xl font-bold text-primary-600 dark:text-primary-400">
        {{ len (where site.RegularPages "Section" "posts") }}
      </div>
      <div class="text-xs text-neutral-500 dark:text-neutral-400">文章</div>
    </div>
  </div>
</div>
